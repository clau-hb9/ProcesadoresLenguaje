package lex.generado;
import lex.manual.SimbolosTerminales; 
import lex.manual.Symbol;

%%


%class Lexer
%implements SimbolosTerminales
%public
%unicode

%line 	/*Cuenta las lineas. yyline devuelve las lineas desde principio hasta token*/
%column /*Columnas. yycolumn*/
%char 	/*Cuenta los caracteres. yychar te devuelve el numero de caracteres contados desde el principio hasta donde este el token*/

%function next_token 	/*Nombre del metodo que escanea la entrada y devuelve el siguiente token*/
%type Symbol 			/*Tipo de retorno para la funcion scan*/

/*Valores y codigo que se va a ejecutar cuando se llegue al final del fichero*/
%eofval{
    return new Symbol(EOF);
%eofval}


/*MACROS Y EXPRESIONES REGULARES*/
/*Espacios*/
Newline    = \r | \n | \r\n
Whitespace = [ \t\f] | {Newline}

/*Numeros*/
Integer		= [0-9]+
Float 	= [0-9]+ ("." [0-9]+)?

/* Comentarios */
Comment = {TraditionalComment} | {EndOfLineComment}
TraditionalComment = "/*" {CommentContent} \*+ "/"
EndOfLineComment = "//" [^\r\n]* {Newline}
CommentContent = ( [^*] | \*+[^*/] )*

/* Datos identificativos */
FullName 			= {Name} ({Whitespace} {Name})+
Name				= ([A-Z¡…Õ”⁄][a-z·ÈÌÛ˙]*) (\-[A-Z¡…Õ”⁄][a-z·ÈÌÛ˙]*)*
Email				= [A-Za-z0-9\_\-]+ \@ ([A-Za-z0-9\_\-]+ \.)+ [A-Za-z0-9]+
DNI					= [0-9]{8} [A-Z]
Matricula			= [0-9]{4} [ ]? [B-DF-HJ-—P-TV-Z]{3}
Date				= ([0-2][0-9]|(3)[0-1]) "/" (((0)[0-9])|((1)[0-2])) "/" [0-9]{4}


ident = ([:jletter:] | "_" ) ([:jletterdigit:] | [:jletter:] | "_" )*




%state CODESEG

%%  

/* REGLAS PARA DETERTAR TOKENS Y ACCIONES ASOCIADAS */
<YYINITIAL> {

  {Whitespace} {                              }
  {Comment} {                              }
  ";"          { return new Symbol(SimbolosTerminales.SEMI); }
  "+"          { return new Symbol(SimbolosTerminales.PLUS); }
  "-"          { return new Symbol(SimbolosTerminales.MINUS); }
  "*"          { return new Symbol(SimbolosTerminales.TIMES); }
/*  "n"          { return new Symbol(SimbolosTerminales.UMINUS); }*/
  "("          { return new Symbol(SimbolosTerminales.LPAREN); }
  ")"          { return new Symbol(SimbolosTerminales.RPAREN); }
{Integer}      { return new Symbol(SimbolosTerminales.NUMBER ,Integer.parseInt(yytext())); 	
{Float}      	{ return new Symbol(SimbolosTerminales.NUMBER , Double.parseDouble(yytext()));

  {FullName}  			{ System.out.println("Nombre y apellidos: " + yytext());												}
  {Email}	  			{ System.out.println("Email: " + yytext());																}
  {DNI}	  				{ System.out.println("DNI: " + yytext());																}
  {Plate}				{ System.out.println("MatrÌcula: " + yytext());															}
  {Date}	  			{ System.out.println("Fecha: " + yytext());	 				}

}



// error fallback
.|\n          {System.err.println("warning: Unrecognized character '"+ yytext()+"' -- ignored" + " at : "+ (yyline+1) + " " + (yycolumn+1) + " " + yychar); }

